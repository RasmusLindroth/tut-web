<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tut - Make a theme</title>
    <style>
        :root {
            --background: #272822;
            --text: #f8f8f2;
            --subtle: gray;
            --warning-text: #f92672;
            --text-special-one: #ae81ff;
            --text-special-two: #a6e22e;
            --top-bar-background: #f92672;
            --top-bar-text: #f8f8f2;
            --status-bar-background: #f92672;
            --status-bar-text: #f8f8f2;
            --status-bar-view-background: #ae81ff;
            --status-bar-view-text: #f8f8f2;
            --list-selected-background: #f92672;
            --list-selected-text: #f8f8f2;
            --list-selected-inactive-background: #f92672;
            --list-selected-inactive-text: #f8f8f8;
            --controls-text: #f8f8f8;
            --controls-highlight: #a6e22e;
            --autocomplete-background: #272822;
            --autocomplete-text: #f8f8f8;
            --autocomplete-selected-background: #ae81ff;
            --autocomplete-selected-text: #f8f8f8;
            --button-color-one: #f92672;
            --button-color-two: #272822;
            --timeline-name-background: #272822;
            --timeline-name-text: #808080;
            --command-text: #f8f8f2;
        }

        body {
            font-family: 'Courier New', monospace;
            font-size: 1.3em;
        }

        .preview {
            background-color: var(--background);
            color: var(--text);
        }

        .autocomplete {
            display: inline-block;
            background-color: var(--autocomplete-background);
            color: var(--autocomplete-text);
        }

        .autocomplete p {
            margin: 0;
        }

        .subtle {
            color: var(--subtle);
        }

        .specialOne,
        .infoColor {
            color: var(--text-special-one);
        }

        .specialTwo {
            color: var(--text-special-two);
        }

        .cc {
            color: var(--controls-highlight);
            font-weight: bold;
        }

        #list p {
            margin: 0;
        }

        .active {
            background-color: var(--list-selected-background);
            color: var(--list-selected-text);
        }

        .inactive {
            background-color: var(--list-selected-inactive-background);
            color: var(--list-selected-inactive-text);
        }

        #head {
            background-color: var(--top-bar-background);
            color: var(--top-bar-text);
        }

        #content {
            display: grid;
            grid-template-columns: 35% auto;
            grid-template-rows: auto 2em;
        }

        #list {
            grid-column-start: 1;
            grid-column-end: 2;
            grid-row-start: 1;
            grid-row-end: 3;
        }

        #list p {
              display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;  
  overflow: hidden;
        }

        #main {
            grid-column-start: 2;
            grid-column-end: 3;
            grid-row-start: 1;
            grid-row-end: 1;
            padding-left: 1em;
        }

        #topMain p {
            margin: 0;
        }

        #controls {
            color: var(--controls-text);
            grid-column-start: 2;
            grid-column-end: 3;
            grid-row-start: 2;
            grid-row-end: 3;
            padding-left: 1em;
            overflow: hidden;
        }

        #statusbar {
            background-color: var(--status-bar-background);
            color: var(--status-bar-text);
        }

        .statusbarView {
            background-color: var(--status-bar-view-background) !important;
            color: var(--status-bar-view-text) !important;
        }

        #cmdbar {
            color: var(--command-text);
        }

        #modal {
            text-align: center;
            padding: 2em 0;
        }

        #modalBtns {
            display: flex;
            justify-content: center;
            column-gap: 2em;
        }

        #modalBtns>div {
            padding: 0.5em;
        }

        #btnYes {
            background-color: var(--button-color-one);
            color: var(--button-color-two);
        }

        #btnNo {
            color: var(--button-color-one);
        }

        .activeAc {
            background-color: var(--autocomplete-selected-background);
            color: var(--autocomplete-selected-text);
        }

        .cbarErr {
            color: var(--warning-text) !important;
        }

        #colorPicker p {
            margin: 0;
        }

        .name {
            background-color: var(--timeline-name-background);
            color: var(--timeline-name-text);
        }

    </style>
</head>

<body>
    <main>
        <h1>Make your own theme for tut here</h1>
        <p>
            <a href="/" title="Go back to main site">Go back to main site.</a>
        </p>
        <h3>Normal view</h3>
        <div class="preview">
            <div id="head">tut - home (1/1) me@example.com</div>
            <div id="content">
                <div id="list">
                    <p class="active">18:00 foo</p>
                    <p>17:00 bar</p>
                    <p>2022-07-16 abc@example.com</p>
                    <p>2022-07-15 abc@example.com</p>
                    <p class="name">Local</p>
                    <p>18:00 foo</p>
                    <p>17:00 bar</p>
                    <p class="inactive">2022-07-16 abc@example.com</p>
                    <p>2022-07-15 abc@example.com</p>
                    <p class="name">Notifications</p>
                    <p>18:00 foo</p>
                    <p class="inactive">17:00 bar</p>
                    <p>2022-07-16 abc@example.com</p>
                    <p>2022-07-15 abc@example.com</p>
                </div>
                <div id="main">
                    <div id="topMain">
                        <p class="subtle">Foo (bar) boosted</p>
                        <p class="specialTwo">Short</p>
                        <p class="specialOne">full@example.com</p>
                    </div>
                    <p>Here is the content.</p>
                    <p id="info">Replies
                        <span class="infoColor">2</span>
                        Boosts
                        <span class="infoColor">4</span>
                        Favorites
                        <span class="infoColor">8</span>
                    </p>
                </div>
                <div id="controls">
                    <p>
                        <span class="cc">F</span>avorite
                        <span class="cc">B</span>oost
                        <span class="cc">T</span>hread
                        <span class="cc">R</span>eply
                        <span class="cc">V</span>iew
                        <span class="cc">U</span>ser
                        <span class="cc">M</span>edia
                        <span class="cc">O</span>pen
                        <span class="cc">A</span>vatar
                        <span class="cc">S</span>ave
                        <span class="cc">Y</span>ank
                    </p>
                </div>
            </div>
            <div id="statusbar">--LIST--</div>
            <div id="cmdbar">Press ? or :help to learn how tut functions</div>
        </div>
        <button id="vmode">Switch to view mode</button>
        <button id="cmdBtn">Show error message</button>
        <h3>Yes or No</h3>
        <div class="preview">
            <div id="modal">
                <p>Do you want to exit tut?</p>
                <div id="modalBtns">
                    <div id="btnYes">Yes</div>
                    <div id="btnNo">No</div>
                </div>
            </div>
        </div>
        <h3>Cmdbar autocomplete</h3>
        <div>
            <div class="autocomplete">
                <p>:blocking</p>
                <p>:boosts</p>
                <p class="activeAc">:bookmarks</p>
                <p>:compose</p>
                <p>:favorited</p>
                <p>:favorites</p>
            </div>
        </div>
        <div id="themer">
            <h3>Customize your theme</h3>
            <p>Just now it only works with HEX-colors.</p>
            <div id="colorPicker"></div>
            <h4>Output</h4>
            <p>You'll have to paste the output to a new file e.g. foo.toml located in ~/.config/tut/themes/foo.toml and
                then set theme=foo in ~/.config/tut/config.toml</p>
            <pre id="output"></pre>
            <p>
                <a href="/" title="Go back to main site">Go back to main site.</a>
            </p>
        </div>
    </main>
    <script>
        let vmodeBtn = document.getElementById("vmode");
        let sbar = document.getElementById("statusbar");
        vmodeBtn.addEventListener("click", () => {
            sbar.classList.toggle("statusbarView");
            if (sbar.classList.contains("statusbarView")) {
                vmodeBtn.innerText = "Switch to normal mode";
            } else {
                vmodeBtn.innerText = "Switch to view mode";
            }
        }, false);

        let cmdBtn = document.getElementById("cmdBtn");
        let cbar = document.getElementById("cmdbar");
        cmdBtn.addEventListener("click", () => {
            cbar.classList.toggle("cbarErr");
            if (cbar.classList.contains("cbarErr")) {
                cmdBtn.innerText = "Show no error";
                cbar.innerText = "Can't connect to example.com. Err: connection timed out.";
            } else {
                cmdBtn.innerText = "Show error message";
                cbar.innerText = "Press ? or :help to learn how tut functions";
            }
        }, false);

        let themeName = [
            ["bg", "#272822", "background"],
            ["t", "#f8f8f2", "text"],
            ["s", "#808080", "subtle"],
            ["wt", "#f92672", "warning-text"],
            ["tso", "#ae81ff", "text-special-one"],
            ["tst", "#a6e22e", "text-special-two"],
            ["tbb", "#f92672", "top-bar-background"],
            ["tbt", "#f8f8f2", "top-bar-text"],
            ["sbb", "#f92672", "status-bar-background"],
            ["sbt", "#f8f8f2", "status-bar-text"],
            ["sbvb", "#ae81ff", "status-bar-view-background"],
            ["sbvt", "#f8f8f2", "status-bar-view-text"],
            ["lsb", "#f92672", "list-selected-background"],
            ["lst", "#f8f8f2", "list-selected-text"],
            ["lsib", "#ae81ff", "list-selected-inactive-background"],
            ["lsit", "#f8f8f8", "list-selected-inactive-text"],
            ["ct", "#f8f8f8", "controls-text"],
            ["ch", "#a6e22e", "controls-highlight"],
            ["ab", "#272822", "autocomplete-background"],
            ["at", "#f8f8f8", "autocomplete-text"],
            ["asb", "#ae81ff", "autocomplete-selected-background"],
            ["ast", "#f8f8f8", "autocomplete-selected-text"],
            ["bco", "#f92672", "button-color-one"],
            ["bct", "#272822", "button-color-two"],
            ["tnb", "#272822", "timeline-name-background"],
            ["tnt", "#808080", "timeline-name-text"],
            ["cmdt", "#f8f8f2", "command-text"]
        ];

        let root = document.documentElement;
        let cp = document.getElementById("colorPicker");
        themeName.forEach((arr, i) => {
            let p = document.createElement("p");
            p.innerText = arr[2] + " ";
            let ic = document.createElement("input");
            ic.type = "color"
            ic.id = `${arr[0]}-c`
            ic.value = arr[1]
            let ih = document.createElement("input");
            ih.type = "text"
            ih.value = arr[1]
            p.appendChild(ic);
            p.append(" ")
            p.appendChild(ih);
            cp.appendChild(p);
            root.style.setProperty(`--${arr[2]}`, arr[1]);

            ic.addEventListener("change", () => {
                ih.value = ic.value;
                console.log("changing from c");
                root.style.setProperty(`--${arr[2]}`, ic.value);
                Output();
            }, false);
            ih.addEventListener("change", () => {
                c.value = h.value;
                root.style.setProperty(`--${arr[2]}`, ic.value);
                Output();
            }, false);
        });
        Output();

        function Output() {
            let output = document.getElementById("output");
            output.innerHTML = "";
            themeName.forEach((arr, i) => {
                let val = document.getElementById(`${arr[0]}-c`).value;
                output.innerHTML += `${arr[2]}="${val}"\n`;
            });
        }
    </script>
</body>

</html>
